show_progress 0.1 0

format SYSTEM:
copy_dir PACKAGE:system SYSTEM:

set_perm_recursive 0 0 0755 0644 SYSTEM:
set_perm_recursive 0 2000 0755 0755 SYSTEM:bin
set_perm_recursive 0 2000 0755 0755 SYSTEM:xbin
set_perm_recursive 0 2000 0755 0755 SYSTEM:etc/init.d

set_perm 0 2000 0550 SYSTEM:etc/init.goldfish.sh
set_perm 1002 1002 0440 SYSTEM:etc/dbus.conf

set_perm_recursive 1002 1002 0755 0440 SYSTEM:etc/bluetooth/
set_perm 0 0 0755 SYSTEM:etc/bluetooth/

set_perm 0 2000 0755 SYSTEM:xbin/busybox

symlink /system/xbin/busybox SYSTEM:bin/[
symlink /system/xbin/busybox SYSTEM:bin/[[
symlink /system/xbin/busybox SYSTEM:bin/acpid
symlink /system/xbin/busybox SYSTEM:bin/addgroup
symlink /system/xbin/busybox SYSTEM:bin/adduser 
symlink /system/xbin/busybox SYSTEM:bin/adjtimex
symlink /system/xbin/busybox SYSTEM:bin/ar      
symlink /system/xbin/busybox SYSTEM:bin/arp     
symlink /system/xbin/busybox SYSTEM:bin/arping  
symlink /system/xbin/busybox SYSTEM:bin/awk     
symlink /system/xbin/busybox SYSTEM:bin/basename
symlink /system/xbin/busybox SYSTEM:bin/blkid   
symlink /system/xbin/busybox SYSTEM:bin/brctl   
symlink /system/xbin/busybox SYSTEM:bin/bunzip2 
symlink /system/xbin/busybox SYSTEM:bin/bzcat   
symlink /system/xbin/busybox SYSTEM:bin/bzip2   
symlink /system/xbin/busybox SYSTEM:bin/cal     
symlink /system/xbin/busybox SYSTEM:bin/cat     
symlink /system/xbin/busybox SYSTEM:bin/catv    
symlink /system/xbin/busybox SYSTEM:bin/chat    
symlink /system/xbin/busybox SYSTEM:bin/chattr  
symlink /system/xbin/busybox SYSTEM:bin/chgrp   
symlink /system/xbin/busybox SYSTEM:bin/chmod   
symlink /system/xbin/busybox SYSTEM:bin/chown   
symlink /system/xbin/busybox SYSTEM:bin/chpasswd
symlink /system/xbin/busybox SYSTEM:bin/chpst   
symlink /system/xbin/busybox SYSTEM:bin/chroot  
symlink /system/xbin/busybox SYSTEM:bin/chrt    
symlink /system/xbin/busybox SYSTEM:bin/chvt    
symlink /system/xbin/busybox SYSTEM:bin/cksum   
symlink /system/xbin/busybox SYSTEM:bin/clear   
symlink /system/xbin/busybox SYSTEM:bin/cmp     
symlink /system/xbin/busybox SYSTEM:bin/comm    
symlink /system/xbin/busybox SYSTEM:bin/cp      
symlink /system/xbin/busybox SYSTEM:bin/cpio    
symlink /system/xbin/busybox SYSTEM:bin/crond   
symlink /system/xbin/busybox SYSTEM:bin/crontab 
symlink /system/xbin/busybox SYSTEM:bin/cryptpw 
symlink /system/xbin/busybox SYSTEM:bin/cttyhack
symlink /system/xbin/busybox SYSTEM:bin/cut     
symlink /system/xbin/busybox SYSTEM:bin/date    
symlink /system/xbin/busybox SYSTEM:bin/dc      
symlink /system/xbin/busybox SYSTEM:bin/dd      
symlink /system/xbin/busybox SYSTEM:bin/deallocvt
symlink /system/xbin/busybox SYSTEM:bin/delgroup 
symlink /system/xbin/busybox SYSTEM:bin/deluser  
symlink /system/xbin/busybox SYSTEM:bin/depmod   
symlink /system/xbin/busybox SYSTEM:bin/devmem   
symlink /system/xbin/busybox SYSTEM:bin/df       
symlink /system/xbin/busybox SYSTEM:bin/dhcprelay
symlink /system/xbin/busybox SYSTEM:bin/diff     
symlink /system/xbin/busybox SYSTEM:bin/dirname  
symlink /system/xbin/busybox SYSTEM:bin/dmesg    
symlink /system/xbin/busybox SYSTEM:bin/dnsd     
symlink /system/xbin/busybox SYSTEM:bin/dos2unix 
symlink /system/xbin/busybox SYSTEM:bin/du       
symlink /system/xbin/busybox SYSTEM:bin/dumpkmap 
symlink /system/xbin/busybox SYSTEM:bin/dumpleases
symlink /system/xbin/busybox SYSTEM:bin/echo      
symlink /system/xbin/busybox SYSTEM:bin/ed        
symlink /system/xbin/busybox SYSTEM:bin/egrep     
symlink /system/xbin/busybox SYSTEM:bin/eject     
symlink /system/xbin/busybox SYSTEM:bin/env       
symlink /system/xbin/busybox SYSTEM:bin/envdir    
symlink /system/xbin/busybox SYSTEM:bin/envuidgid 
symlink /system/xbin/busybox SYSTEM:bin/ether-wake
symlink /system/xbin/busybox SYSTEM:bin/expand    
symlink /system/xbin/busybox SYSTEM:bin/expr      
symlink /system/xbin/busybox SYSTEM:bin/fakeidentd
symlink /system/xbin/busybox SYSTEM:bin/false     
symlink /system/xbin/busybox SYSTEM:bin/fbset     
symlink /system/xbin/busybox SYSTEM:bin/fbsplash  
symlink /system/xbin/busybox SYSTEM:bin/fdflush   
symlink /system/xbin/busybox SYSTEM:bin/fdformat  
symlink /system/xbin/busybox SYSTEM:bin/fdisk     
symlink /system/xbin/busybox SYSTEM:bin/fgrep     
symlink /system/xbin/busybox SYSTEM:bin/find      
symlink /system/xbin/busybox SYSTEM:bin/findfs    
symlink /system/xbin/busybox SYSTEM:bin/fold      
symlink /system/xbin/busybox SYSTEM:bin/free      
symlink /system/xbin/busybox SYSTEM:bin/freeramdisk
symlink /system/xbin/busybox SYSTEM:bin/fsck       
symlink /system/xbin/busybox SYSTEM:bin/fsck.minix 
symlink /system/xbin/busybox SYSTEM:bin/ftpd       
symlink /system/xbin/busybox SYSTEM:bin/ftpget     
symlink /system/xbin/busybox SYSTEM:bin/ftpput     
symlink /system/xbin/busybox SYSTEM:bin/fuser      
symlink /system/xbin/busybox SYSTEM:bin/getopt     
symlink /system/xbin/busybox SYSTEM:bin/getty      
symlink /system/xbin/busybox SYSTEM:bin/grep       
symlink /system/xbin/busybox SYSTEM:bin/gunzip     
symlink /system/xbin/busybox SYSTEM:bin/halt       
symlink /system/xbin/busybox SYSTEM:bin/hd         
symlink /system/xbin/busybox SYSTEM:bin/hdparm     
symlink /system/xbin/busybox SYSTEM:bin/head       
symlink /system/xbin/busybox SYSTEM:bin/hexdump    
symlink /system/xbin/busybox SYSTEM:bin/hostid     
symlink /system/xbin/busybox SYSTEM:bin/hostname   
symlink /system/xbin/busybox SYSTEM:bin/httpd      
symlink /system/xbin/busybox SYSTEM:bin/hush       
symlink /system/xbin/busybox SYSTEM:bin/hwclock    
symlink /system/xbin/busybox SYSTEM:bin/id         
symlink /system/xbin/busybox SYSTEM:bin/ifconfig   
symlink /system/xbin/busybox SYSTEM:bin/ifdown     
symlink /system/xbin/busybox SYSTEM:bin/ifenslave  
symlink /system/xbin/busybox SYSTEM:bin/ifup       
symlink /system/xbin/busybox SYSTEM:bin/inetd      
symlink /system/xbin/busybox SYSTEM:bin/init       
symlink /system/xbin/busybox SYSTEM:bin/insmod     
symlink /system/xbin/busybox SYSTEM:bin/install    
symlink /system/xbin/busybox SYSTEM:bin/ionice     
symlink /system/xbin/busybox SYSTEM:bin/ip         
symlink /system/xbin/busybox SYSTEM:bin/ipaddr     
symlink /system/xbin/busybox SYSTEM:bin/ipcalc     
symlink /system/xbin/busybox SYSTEM:bin/ipcrm      
symlink /system/xbin/busybox SYSTEM:bin/ipcs       
symlink /system/xbin/busybox SYSTEM:bin/iplink     
symlink /system/xbin/busybox SYSTEM:bin/iproute    
symlink /system/xbin/busybox SYSTEM:bin/iprule     
symlink /system/xbin/busybox SYSTEM:bin/iptunnel   
symlink /system/xbin/busybox SYSTEM:bin/kbd_mode   
symlink /system/xbin/busybox SYSTEM:bin/kill       
symlink /system/xbin/busybox SYSTEM:bin/killall    
symlink /system/xbin/busybox SYSTEM:bin/killall5   
symlink /system/xbin/busybox SYSTEM:bin/klogd      
symlink /system/xbin/busybox SYSTEM:bin/last       
symlink /system/xbin/busybox SYSTEM:bin/length     
symlink /system/xbin/busybox SYSTEM:bin/less       
symlink /system/xbin/busybox SYSTEM:bin/linux32    
symlink /system/xbin/busybox SYSTEM:bin/linux64    
symlink /system/xbin/busybox SYSTEM:bin/linuxrc    
symlink /system/xbin/busybox SYSTEM:bin/ln         
symlink /system/xbin/busybox SYSTEM:bin/loadfont   
symlink /system/xbin/busybox SYSTEM:bin/loadkmap   
symlink /system/xbin/busybox SYSTEM:bin/logger     
symlink /system/xbin/busybox SYSTEM:bin/login      
symlink /system/xbin/busybox SYSTEM:bin/logname    
symlink /system/xbin/busybox SYSTEM:bin/logread    
symlink /system/xbin/busybox SYSTEM:bin/losetup    
symlink /system/xbin/busybox SYSTEM:bin/lpd        
symlink /system/xbin/busybox SYSTEM:bin/lpq        
symlink /system/xbin/busybox SYSTEM:bin/lpr        
symlink /system/xbin/busybox SYSTEM:bin/ls         
symlink /system/xbin/busybox SYSTEM:bin/lsattr     
symlink /system/xbin/busybox SYSTEM:bin/lsmod      
symlink /system/xbin/busybox SYSTEM:bin/lzmacat    
symlink /system/xbin/busybox SYSTEM:bin/makedevs   
symlink /system/xbin/busybox SYSTEM:bin/makemime   
symlink /system/xbin/busybox SYSTEM:bin/man        
symlink /system/xbin/busybox SYSTEM:bin/md5sum     
symlink /system/xbin/busybox SYSTEM:bin/mdev       
symlink /system/xbin/busybox SYSTEM:bin/mesg       
symlink /system/xbin/busybox SYSTEM:bin/microcom   
symlink /system/xbin/busybox SYSTEM:bin/mkdir      
symlink /system/xbin/busybox SYSTEM:bin/mkdosfs    
symlink /system/xbin/busybox SYSTEM:bin/mkfifo     
symlink /system/xbin/busybox SYSTEM:bin/mkfs.minix 
symlink /system/xbin/busybox SYSTEM:bin/mkfs.vfat  
symlink /system/xbin/busybox SYSTEM:bin/mknod      
symlink /system/xbin/busybox SYSTEM:bin/mkpasswd   
symlink /system/xbin/busybox SYSTEM:bin/mkswap     
symlink /system/xbin/busybox SYSTEM:bin/mktemp     
symlink /system/xbin/busybox SYSTEM:bin/modprobe   
symlink /system/xbin/busybox SYSTEM:bin/more       
symlink /system/xbin/busybox SYSTEM:bin/mount      
symlink /system/xbin/busybox SYSTEM:bin/mountpoint 
symlink /system/xbin/busybox SYSTEM:bin/msh        
symlink /system/xbin/busybox SYSTEM:bin/mt         
symlink /system/xbin/busybox SYSTEM:bin/mv         
symlink /system/xbin/busybox SYSTEM:bin/nameif     
symlink /system/xbin/busybox SYSTEM:bin/nc         
symlink /system/xbin/busybox SYSTEM:bin/netstat    
symlink /system/xbin/busybox SYSTEM:bin/nice       
symlink /system/xbin/busybox SYSTEM:bin/nmeter     
symlink /system/xbin/busybox SYSTEM:bin/nohup      
symlink /system/xbin/busybox SYSTEM:bin/nslookup   
symlink /system/xbin/busybox SYSTEM:bin/od         
symlink /system/xbin/busybox SYSTEM:bin/openvt     
symlink /system/xbin/busybox SYSTEM:bin/passwd     
symlink /system/xbin/busybox SYSTEM:bin/patch      
symlink /system/xbin/busybox SYSTEM:bin/pgrep      
symlink /system/xbin/busybox SYSTEM:bin/pidof      
symlink /system/xbin/busybox SYSTEM:bin/ping6      
symlink /system/xbin/busybox SYSTEM:bin/pipe_progress
symlink /system/xbin/busybox SYSTEM:bin/pivot_root   
symlink /system/xbin/busybox SYSTEM:bin/pkill        
symlink /system/xbin/busybox SYSTEM:bin/popmaildir   
symlink /system/xbin/busybox SYSTEM:bin/poweroff     
symlink /system/xbin/busybox SYSTEM:bin/printenv     
symlink /system/xbin/busybox SYSTEM:bin/printf       
symlink /system/xbin/busybox SYSTEM:bin/ps           
symlink /system/xbin/busybox SYSTEM:bin/pscan        
symlink /system/xbin/busybox SYSTEM:bin/pwd          
symlink /system/xbin/busybox SYSTEM:bin/raidautorun  
symlink /system/xbin/busybox SYSTEM:bin/rdate        
symlink /system/xbin/busybox SYSTEM:bin/rdev         
symlink /system/xbin/busybox SYSTEM:bin/readahead    
symlink /system/xbin/busybox SYSTEM:bin/readlink     
symlink /system/xbin/busybox SYSTEM:bin/readprofile  
symlink /system/xbin/busybox SYSTEM:bin/realpath     
symlink /system/xbin/busybox SYSTEM:bin/reformime    
symlink /system/xbin/busybox SYSTEM:bin/renice       
symlink /system/xbin/busybox SYSTEM:bin/reset        
symlink /system/xbin/busybox SYSTEM:bin/resize       
symlink /system/xbin/busybox SYSTEM:bin/rm           
symlink /system/xbin/busybox SYSTEM:bin/rmdir        
symlink /system/bin/toolbox SYSTEM:bin/rmmod
symlink /system/xbin/busybox SYSTEM:bin/route        
symlink /system/xbin/busybox SYSTEM:bin/rtcwake      
symlink /system/xbin/busybox SYSTEM:bin/run-parts    
symlink /system/xbin/busybox SYSTEM:bin/runlevel     
symlink /system/xbin/busybox SYSTEM:bin/runsv        
symlink /system/xbin/busybox SYSTEM:bin/runsvdir     
symlink /system/xbin/busybox SYSTEM:bin/rx           
symlink /system/xbin/busybox SYSTEM:bin/script       
symlink /system/xbin/busybox SYSTEM:bin/sed          
symlink /system/xbin/busybox SYSTEM:bin/sendmail     
symlink /system/xbin/busybox SYSTEM:bin/seq          
symlink /system/xbin/busybox SYSTEM:bin/setarch      
symlink /system/xbin/busybox SYSTEM:bin/setconsole   
symlink /system/xbin/busybox SYSTEM:bin/setfont      
symlink /system/xbin/busybox SYSTEM:bin/setkeycodes  
symlink /system/xbin/busybox SYSTEM:bin/setlogcons   
symlink /system/xbin/busybox SYSTEM:bin/setsid       
symlink /system/xbin/busybox SYSTEM:bin/setuidgid    
symlink /system/xbin/busybox SYSTEM:bin/sha1sum      
symlink /system/xbin/busybox SYSTEM:bin/sha256sum    
symlink /system/xbin/busybox SYSTEM:bin/sha512sum    
symlink /system/xbin/busybox SYSTEM:bin/showkey      
symlink /system/xbin/busybox SYSTEM:bin/slattach     
symlink /system/xbin/busybox SYSTEM:bin/sleep        
symlink /system/xbin/busybox SYSTEM:bin/softlimit    
symlink /system/xbin/busybox SYSTEM:bin/sort         
symlink /system/xbin/busybox SYSTEM:bin/split        
symlink /system/xbin/busybox SYSTEM:bin/start-stop-daemon
symlink /system/xbin/busybox SYSTEM:bin/stat             
symlink /system/xbin/busybox SYSTEM:bin/strings          
symlink /system/xbin/busybox SYSTEM:bin/stty
symlink /system/xbin/busybox SYSTEM:bin/sulogin          
symlink /system/xbin/busybox SYSTEM:bin/sum              
symlink /system/xbin/busybox SYSTEM:bin/sv               
symlink /system/xbin/busybox SYSTEM:bin/svlogd           
symlink /system/xbin/busybox SYSTEM:bin/swapoff          
symlink /system/xbin/busybox SYSTEM:bin/swapon           
symlink /system/xbin/busybox SYSTEM:bin/switch_root      
symlink /system/xbin/busybox SYSTEM:bin/sync             
symlink /system/xbin/busybox SYSTEM:bin/sysctl           
symlink /system/xbin/busybox SYSTEM:bin/syslogd          
symlink /system/xbin/busybox SYSTEM:bin/tac              
symlink /system/xbin/busybox SYSTEM:bin/tail             
symlink /system/xbin/busybox SYSTEM:bin/tar              
symlink /system/xbin/busybox SYSTEM:bin/tcpsvd           
symlink /system/xbin/busybox SYSTEM:bin/tee              
symlink /system/xbin/busybox SYSTEM:bin/telnet           
symlink /system/xbin/busybox SYSTEM:bin/telnetd          
symlink /system/xbin/busybox SYSTEM:bin/test             
symlink /system/xbin/busybox SYSTEM:bin/tftp             
symlink /system/xbin/busybox SYSTEM:bin/tftpd            
symlink /system/xbin/busybox SYSTEM:bin/time             
symlink /system/xbin/busybox SYSTEM:bin/timeout          
symlink /system/xbin/busybox SYSTEM:bin/top              
symlink /system/xbin/busybox SYSTEM:bin/touch            
symlink /system/xbin/busybox SYSTEM:bin/tr               
symlink /system/xbin/busybox SYSTEM:bin/traceroute       
symlink /system/xbin/busybox SYSTEM:bin/true             
symlink /system/xbin/busybox SYSTEM:bin/tty              
symlink /system/xbin/busybox SYSTEM:bin/ttysize          
symlink /system/xbin/busybox SYSTEM:bin/tunctl           
symlink /system/xbin/busybox SYSTEM:bin/udhcpc           
symlink /system/xbin/busybox SYSTEM:bin/udhcpd           
symlink /system/xbin/busybox SYSTEM:bin/udpsvd
symlink /system/xbin/busybox SYSTEM:bin/umount
symlink /system/xbin/busybox SYSTEM:bin/uname
symlink /system/xbin/busybox SYSTEM:bin/uncompress
symlink /system/xbin/busybox SYSTEM:bin/unexpand
symlink /system/xbin/busybox SYSTEM:bin/uniq
symlink /system/xbin/busybox SYSTEM:bin/unix2dos
symlink /system/xbin/busybox SYSTEM:bin/unlzma
symlink /system/xbin/busybox SYSTEM:bin/unzip
symlink /system/xbin/busybox SYSTEM:bin/uptime
symlink /system/xbin/busybox SYSTEM:bin/usleep
symlink /system/xbin/busybox SYSTEM:bin/uudecode
symlink /system/xbin/busybox SYSTEM:bin/uuencode
symlink /system/xbin/busybox SYSTEM:bin/vconfig
symlink /system/xbin/busybox SYSTEM:bin/vi
symlink /system/xbin/busybox SYSTEM:bin/vlock
symlink /system/xbin/busybox SYSTEM:bin/watch
symlink /system/xbin/busybox SYSTEM:bin/watchdog
symlink /system/xbin/busybox SYSTEM:bin/wc
symlink /system/xbin/busybox SYSTEM:bin/wget
symlink /system/xbin/busybox SYSTEM:bin/which
symlink /system/xbin/busybox SYSTEM:bin/who
symlink /system/xbin/busybox SYSTEM:bin/whoami
symlink /system/xbin/busybox SYSTEM:bin/xargs
symlink /system/xbin/busybox SYSTEM:bin/yes
symlink /system/xbin/busybox SYSTEM:bin/zcat
symlink /system/xbin/busybox SYSTEM:bin/zcip

symlink /system/bin/toolbox SYSTEM:bin/reboot
symlink /system/bin/toolbox SYSTEM:bin/setprop
symlink /system/bin/toolbox SYSTEM:bin/getprop
symlink /system/bin/toolbox SYSTEM:bin/newfs_msdos

symlink /system/xbin/iwmulticall SYSTEM:xbin/iwconfig
symlink /system/xbin/iwmulticall SYSTEM:xbin/iwlist 
symlink /system/xbin/iwmulticall SYSTEM:xbin/iwpriv 
symlink /system/xbin/iwmulticall SYSTEM:xbin/iwspy 
symlink /system/xbin/iwmulticall SYSTEM:xbin/iwgetid

copy_dir PACKAGE:dev_data INTERNAL:
set_perm 1000 1000 0771 INTERNAL:app_s
set_perm 1000 1000 0771 INTERNAL:app

symlink /data/app_s SYSTEM:app

show_progress 0.2 0
format BOOT:
write_raw_image PACKAGE:boot.img BOOT:
show_progress 0.2 10
